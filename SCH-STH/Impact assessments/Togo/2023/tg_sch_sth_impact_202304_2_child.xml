<?xml version="1.0" encoding="UTF-8"?>
<h:html xmlns="http://www.w3.org/2002/xforms"
  xmlns:ev="http://www.w3.org/2001/xml-events"
  xmlns:h="http://www.w3.org/1999/xhtml"
  xmlns:jr="http://openrosa.org/javarosa"
  xmlns:odk="http://www.opendatakit.org/xforms"
  xmlns:orx="http://openrosa.org/xforms"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <h:head>
    <h:title>(2023 Avril) - 2. SCH/STH – Enrôlement</h:title>
    <model >

      <instance>
        <data id="tg_sch_sth_impact_202304_2_child">
          <p_recorder/>
          <p_district/>
          <p_usp/>
          <p_site/>
          <p_consent_note/>
          <p_consent/>
          <p_barcodeid/>
          <p_barcode_ok/>
          <p_manual_code_id/>
          <p_age_yrs/>
          <p_sex/>
          <p_collected_stool/>
          <p_collected_urine/>
          <p_grading/>
          <p_urine_conserve/>
          <p_ending_survey_note/>
          <p_sample_note/>
          <p_remarks/>
          <p_start/>
          <p_end/>
          <meta>
            <instanceID/>
          </meta>
        </data>
      </instance>

      <itext>
        <translation default="true()" lang="French">
          <text id="/data/p_recorder:jr:constraintMsg">
            <value>Doit contenir 2 à 4 caractère alphanumérique</value>
          </text>
          <text id="/data/p_recorder:label">
            <value>Sélectionner l'enquêteur</value>
          </text>
          <text id="/data/p_district:label">
            <value>Sélectionner le district</value>
          </text>
          <text id="/data/p_usp:label">
            <value>Sélectionner le sous-district (USP)</value>
          </text>
          <text id="/data/p_site:label">
            <value>Sélectionner le nom du village</value>
          </text>
          <text id="/data/p_consent_note:label">
            <value>Bonjour ! Je suis ici au nom du ministère de la Santé. Nous menons une enquête pour déterminer la présence de schistosomiase (SCH) et des géo-helminthiases (STH) dans votre école. Je vais vous poser quelques questions sur le mode et le mécanisme de transmission et apprécierais également de prélever des échantillons de selles et d'urine auprès de vous. Si vous souhaitez participer à l'enquête, dites-le-moi et je noterai vos réponses et vous fournirai des récipients de selles et d'urine. Si vous êtes d'accord, l'enquête ne prendra que quelques minutes. Participer à l'enquête scolaire vous sera directement bénéfique car en cas de diagnostic de vers, vous recevrez immédiatement des médicaments vermifuges. Votre communauté et votre école en bénéficieront également directement, car les résultats de cette enquête aideront le ministère de la Santé à mettre en œuvre des activités de déparasitage pour les enfants âgés de 5 à 14 ans, si les résultats de laboratoire révèlent la nécessité d'interventions. Vous pouvez refuser sans pénalité. Souhaitez-vous participer à notre enquête ?</value>
          </text>
          <text id="/data/p_consent:label">
            <value>L'enfant a-t-il donné son consentement et le consentement de ses parents ou tuteurs?</value>
          </text>
          <text id="/data/p_consent:hint">
            <value>La réponse "Non" mettra fin à l'enquête</value>
          </text>
          <text id="/data/p_consent/A.donne:label">
            <value>1. A donné</value>
          </text>
          <text id="/data/p_consent/A.refuse:label">
            <value>2. A refusé</value>
          </text>
          <text id="/data/p_barcodeid:jr:constraintMsg">
            <value>Veuillez scanner le QR code du bon district. Les trois premières lettres du SR code doivent correspondre aux trois premières lettres du nom du district. Par exemple: TCH0001 for TCHAOUDJO.</value>
          </text>
          <text id="/data/p_barcodeid:label">
            <value>Veuillez scanner le QR Code</value>
          </text>
          <text id="/data/p_barcode_ok:label">
            <value>Le code QR a-t-il été correctement scanné</value>
          </text>
          <text id="/data/p_barcode_ok/Oui:label">
            <value>Oui</value>
          </text>
          <text id="/data/p_barcode_ok/Non:label">
            <value>Non</value>
          </text>
          <text id="/data/p_manual_code_id:jr:constraintMsg">
            <value>Veuillez saisir le code de l'autocollant du QR code. Le format est les trois premières lettres du district suivie de quatre chiffres. Par exemple: TCH0001 pour TCHAOUDJO</value>
          </text>
          <text id="/data/p_manual_code_id:label">
            <value>Saisez le code QR manuellement</value>
          </text>
          <text id="/data/p_age_yrs:jr:constraintMsg">
            <value>L'âge doit être compris entre 4 et 15 ans</value>
          </text>
          <text id="/data/p_age_yrs:label">
            <value>Entrez l'âge de l'enfant en années</value>
          </text>
          <text id="/data/p_sex:label">
            <value>Sélectionnez le sexe de l'enfant</value>
          </text>
          <text id="/data/p_sex/Feminin:label">
            <value>Féminin</value>
          </text>
          <text id="/data/p_sex/Masculin:label">
            <value>Masculin</value>
          </text>
          <text id="/data/p_collected_stool:label">
            <value>Un échantillon de selles de cet enfant a-t-il été prélevé ?</value>
          </text>
          <text id="/data/p_collected_stool:hint">
            <value>Nous ne voulons pas rentrer s'ils ne donnent pas d'échantillon car nous ne pouvons pas garantir qu'il n'y aura pas d'échange d'échantillons.</value>
          </text>
          <text id="/data/p_collected_stool/Oui:label">
            <value>Oui</value>
          </text>
          <text id="/data/p_collected_stool/Non:label">
            <value>Non</value>
          </text>
          <text id="/data/p_collected_urine:label">
            <value>Un échantillon d'urine de cet enfant a-t-il été prélevé ?</value>
          </text>
          <text id="/data/p_collected_urine/Oui:label">
            <value>Oui</value>
          </text>
          <text id="/data/p_collected_urine/Non:label">
            <value>Non</value>
          </text>
          <text id="/data/p_grading:label">
            <value>Graduation de la microhématurie</value>
          </text>
          <text id="/data/p_grading/Negatif:label">
            <value>Négatif</value>
          </text>
          <text id="/data/p_grading/Trace.non.hemolysee:label">
            <value>Trace non hémolysée</value>
          </text>
          <text id="/data/p_grading/Trace.hemolysee:label">
            <value>Trace hémolysée</value>
          </text>
          <text id="/data/p_grading/+:label">
            <value>+</value>
          </text>
          <text id="/data/p_grading/++:label">
            <value>++</value>
          </text>
          <text id="/data/p_grading/+++:label">
            <value>+++</value>
          </text>
          <text id="/data/p_urine_conserve:jr:constraintMsg">
            <value>L'urine ne doit pas être conservée si le résultat du test Hemastix est positif</value>
          </text>
          <text id="/data/p_urine_conserve:label">
            <value>Cette urine est-elle conservée pour la filtration de l'urine?</value>
          </text>
          <text id="/data/p_urine_conserve/Oui:label">
            <value>Oui</value>
          </text>
          <text id="/data/p_urine_conserve/Non:label">
            <value>Non</value>
          </text>
          <text id="/data/p_ending_survey_note:label">
            <value>Vous venez d'entrer une valeur qui entrainera la fin de l'enquête</value>
          </text>
          <text id="/data/p_sample_note:label">
            <value>Vous venez d'entrer une valeur qui entrainera la fin de l'enquête. Veuillez collecter les échantillons de selle et d'urine du participant.</value>
          </text>
          <text id="/data/p_remarks:label">
            <value>Notes complémentaires</value>
          </text>
        </translation>
      </itext>

      <bind constraint="regex(.,'^[a-zA-Z]{2,4}$')" jr:constraintMsg="jr:itext('/data/p_recorder:jr:constraintMsg')" nodeset="/data/p_recorder" required="true()" type="string"/>
      <bind nodeset="/data/p_district" required="true()" type="string" db_get="col_1"/>
      <bind nodeset="/data/p_usp" required="true()" type="string" db_get="col_2" db_filter_by_col_1="/data/p_district"/>
      <bind nodeset="/data/p_site" required="true()" type="string" db_get="col_3" db_filter_by_col_2="/data/p_usp"/>
      <bind nodeset="/data/p_consent_note" readonly="true()" type="string"/>
      <bind nodeset="/data/p_consent" required="true()" type="string"/>
      <bind constraint="(regex(., '^[A-Z]{3}[0-9]{4}$') and substr( /data/p_district , 0, 3) = substr(., 0, 3) and  /data/p_district != 'KPENDJAL OUEST') or (if( /data/p_district  = 'KPENDJAL OUEST', if(substr(., 0, 3) = 'OUE', true(), false()), false()) and regex(., '^[A-Z]{3}[0-9]{4}$'))" jr:constraintMsg="jr:itext('/data/p_barcodeid:jr:constraintMsg')" nodeset="/data/p_barcodeid" relevant=" /data/p_consent  = 'A.donne'" type="barcode"/>
      <bind nodeset="/data/p_barcode_ok" relevant=" /data/p_consent  = 'A.donne'" required="true()" type="string"/>
      <bind constraint="(regex(., '^[A-Z]{3}[0-9]{4}$') and substr( /data/p_district , 0, 3) = substr(., 0, 3) and  /data/p_district != 'KPENDJAL OUEST') or (if( /data/p_district  = 'KPENDJAL OUEST', if(substr(., 0, 3) = 'OUE', true(), false()), false()) and regex(., '^[A-Z]{3}[0-9]{4}$'))" jr:constraintMsg="jr:itext('/data/p_manual_code_id:jr:constraintMsg')" nodeset="/data/p_manual_code_id" relevant=" /data/p_consent  = 'A.donne' and  /data/p_barcode_ok  = 'Non'" required="true()" type="string"/>
      <bind constraint=". &gt;= 5 and . &lt;= 14" jr:constraintMsg="jr:itext('/data/p_age_yrs:jr:constraintMsg')" nodeset="/data/p_age_yrs" relevant=" /data/p_consent  = 'A.donne'" required="true()" type="int"/>
      <bind nodeset="/data/p_sex" relevant=" /data/p_consent  = 'A.donne'" required="true()" type="string"/>
      <bind nodeset="/data/p_collected_stool" relevant=" /data/p_consent  = 'A.donne' and ( /data/p_usp  = 'AGBATITOE' or  /data/p_usp  = 'AGOTIME ADAME' or  /data/p_usp  = 'AKPAKPAKPE' or  /data/p_usp  = 'ALEHERIDE' or  /data/p_usp  = 'AOU MONO' or  /data/p_usp  = 'ASSAHOUN FIAGBE' or  /data/p_usp  = 'AVASSIKPE' or  /data/p_usp  = 'AVEDZE' or  /data/p_usp  = 'AVETONOU' or  /data/p_usp  = 'BATOUME' or  /data/p_usp  = 'BROUNFOU' or  /data/p_usp  = 'CMS HANKELI' or  /data/p_usp  = 'DALIA' or  /data/p_usp  = 'DIMORI' or  /data/p_usp  = 'HOPITAL SAINT GOTHARD DE DEDOME' or  /data/p_usp  = 'HUILEHOE' or  /data/p_usp  = 'KADAMBARA' or  /data/p_usp  = 'KASSENA' or  /data/p_usp  = 'KATI' or  /data/p_usp  = 'KLABE APEGAME' or  /data/p_usp  = 'KLOEGNAME' or  /data/p_usp  = 'KLONOU' or  /data/p_usp  = 'KOUNDOUM' or  /data/p_usp  = 'KPAZA' or  /data/p_usp  = 'LAMA TESSI' or  /data/p_usp  = 'OGA' or  /data/p_usp  = 'PATATOUKOU' or  /data/p_usp  = 'SAGBADAI' or  /data/p_usp  = 'SANDA AFOHOU' or  /data/p_usp  = 'SANDA KAGBANDA' or  /data/p_usp  = 'TAWOREDA' or  /data/p_usp  = 'TCHALO' or  /data/p_usp  = 'TCHATCHAMINADE' or  /data/p_usp  = 'TETETOU')" required="true()" type="string"/>
      <bind nodeset="/data/p_collected_urine" relevant=" /data/p_consent  = 'A.donne'" required="true()" type="string"/>
      <bind nodeset="/data/p_grading" relevant=" /data/p_consent  = 'A.donne' and  /data/p_collected_urine  = 'Oui'" type="string"/>
      <bind constraint="if(( /data/p_grading ='Trace.hemolysee' or  /data/p_grading ='+' or  /data/p_grading ='++' or  /data/p_grading ='+++' ) and . = 'Non', false(), true()) and if( /data/p_grading ='Trace.non.hemolysee' and . = 'Oui', false(), true())" jr:constraintMsg="jr:itext('/data/p_urine_conserve:jr:constraintMsg')" nodeset="/data/p_urine_conserve" relevant=" /data/p_consent  = 'A.donne' and  /data/p_collected_urine  = 'Oui' and  /data/p_grading != 'Negatif'" type="string"/>
      <bind nodeset="/data/p_ending_survey_note" readonly="true()" relevant=" /data/p_consent  = 'A.refuse'" type="string"/>
      <bind nodeset="/data/p_sample_note" readonly="true()" relevant=" /data/p_collected_stool  = 'Non' and  /data/p_collected_urine  = 'Non'" type="string"/>
      <bind nodeset="/data/p_remarks" type="string"/>
      <bind jr:preload="timestamp" jr:preloadParams="start" nodeset="/data/p_start" type="dateTime"/>
      <bind jr:preload="timestamp" jr:preloadParams="end" nodeset="/data/p_end" type="dateTime"/>
      <bind jr:preload="uid" nodeset="/data/meta/instanceID" readonly="true()" type="string"/>
    </model>
  </h:head>
  <h:body>
    <input ref="/data/p_recorder">
      <label ref="jr:itext('/data/p_recorder:label')"/>
    </input>
    <input ref="/data/p_district">
      <label ref="jr:itext('/data/p_district:label')"/>
    </input>
    <input ref="/data/p_usp">
      <label ref="jr:itext('/data/p_usp:label')"/>
    </input>
    <input ref="/data/p_site">
      <label ref="jr:itext('/data/p_site:label')"/>
    </input>
    <input ref="/data/p_consent_note">
      <label ref="jr:itext('/data/p_consent_note:label')"/>
    </input>
    <select1 ref="/data/p_consent">
      <label ref="jr:itext('/data/p_consent:label')"/>
      <hint ref="jr:itext('/data/p_consent:hint')"/>
      <item>
        <label ref="jr:itext('/data/p_consent/A.donne:label')"/>
        <value>A.donne</value>
      </item>
      <item>
        <label ref="jr:itext('/data/p_consent/A.refuse:label')"/>
        <value>A.refuse</value>
      </item>
    </select1>
    <input ref="/data/p_barcodeid">
      <label ref="jr:itext('/data/p_barcodeid:label')"/>
    </input>
    <select1 ref="/data/p_barcode_ok">
      <label ref="jr:itext('/data/p_barcode_ok:label')"/>
      <item>
        <label ref="jr:itext('/data/p_barcode_ok/Oui:label')"/>
        <value>Oui</value>
      </item>
      <item>
        <label ref="jr:itext('/data/p_barcode_ok/Non:label')"/>
        <value>Non</value>
      </item>
    </select1>
    <input ref="/data/p_manual_code_id">
      <label ref="jr:itext('/data/p_manual_code_id:label')"/>
    </input>
    <input ref="/data/p_age_yrs">
      <label ref="jr:itext('/data/p_age_yrs:label')"/>
    </input>
    <select1 ref="/data/p_sex">
      <label ref="jr:itext('/data/p_sex:label')"/>
      <item>
        <label ref="jr:itext('/data/p_sex/Feminin:label')"/>
        <value>Feminin</value>
      </item>
      <item>
        <label ref="jr:itext('/data/p_sex/Masculin:label')"/>
        <value>Masculin</value>
      </item>
    </select1>
    <select1 ref="/data/p_collected_stool">
      <label ref="jr:itext('/data/p_collected_stool:label')"/>
      <hint ref="jr:itext('/data/p_collected_stool:hint')"/>
      <item>
        <label ref="jr:itext('/data/p_collected_stool/Oui:label')"/>
        <value>Oui</value>
      </item>
      <item>
        <label ref="jr:itext('/data/p_collected_stool/Non:label')"/>
        <value>Non</value>
      </item>
    </select1>
    <select1 ref="/data/p_collected_urine">
      <label ref="jr:itext('/data/p_collected_urine:label')"/>
      <item>
        <label ref="jr:itext('/data/p_collected_urine/Oui:label')"/>
        <value>Oui</value>
      </item>
      <item>
        <label ref="jr:itext('/data/p_collected_urine/Non:label')"/>
        <value>Non</value>
      </item>
    </select1>
    <select1 ref="/data/p_grading">
      <label ref="jr:itext('/data/p_grading:label')"/>
      <item>
        <label ref="jr:itext('/data/p_grading/Negatif:label')"/>
        <value>Negatif</value>
      </item>
      <item>
        <label ref="jr:itext('/data/p_grading/Trace.non.hemolysee:label')"/>
        <value>Trace.non.hemolysee</value>
      </item>
      <item>
        <label ref="jr:itext('/data/p_grading/Trace.hemolysee:label')"/>
        <value>Trace.hemolysee</value>
      </item>
      <item>
        <label ref="jr:itext('/data/p_grading/+:label')"/>
        <value>+</value>
      </item>
      <item>
        <label ref="jr:itext('/data/p_grading/++:label')"/>
        <value>++</value>
      </item>
      <item>
        <label ref="jr:itext('/data/p_grading/+++:label')"/>
        <value>+++</value>
      </item>
    </select1>
    <select1 ref="/data/p_urine_conserve">
      <label ref="jr:itext('/data/p_urine_conserve:label')"/>
      <item>
        <label ref="jr:itext('/data/p_urine_conserve/Oui:label')"/>
        <value>Oui</value>
      </item>
      <item>
        <label ref="jr:itext('/data/p_urine_conserve/Non:label')"/>
        <value>Non</value>
      </item>
    </select1>
    <input ref="/data/p_ending_survey_note">
      <label ref="jr:itext('/data/p_ending_survey_note:label')"/>
    </input>
    <input ref="/data/p_sample_note">
      <label ref="jr:itext('/data/p_sample_note:label')"/>
    </input>
    <input ref="/data/p_remarks">
      <label ref="jr:itext('/data/p_remarks:label')"/>
    </input>
  </h:body>
</h:html>
